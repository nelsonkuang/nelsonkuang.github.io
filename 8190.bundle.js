(()=>{"use strict";var e,t,r={8190:(e,t,r)=>{var o=r(4690);const n=(e,t)=>{try{return{shape:new Function(`${t}\nreturn main;`)()(e,((t,r)=>((e,t,r)=>{if(!t)return e;const o=r,n=new o.gp_Trsf_1,s=new o.gp_Ax1_2(new o.gp_Pnt_3(0,0,0),new o.gp_Dir_4(t.Axis[0],t.Axis[1],t.Axis[2])),a=(i=t.Angle,Math.PI*i/180);var i;n.SetRotation_1(s,a),n.SetTranslationPart(new o.gp_Vec_4(t.Position[0],t.Position[1],t.Position[2]));const c=new o.TopLoc_Location_2(n);return e.Location_2(c,!0),e})(t,r,e))),errorMessage:null}}catch(e){return{shape:null,errorMessage:e.message}}},s=(e,t)=>{const r=[],o=new e.TopExp_Explorer_1;for(o.Init(t,e.TopAbs_ShapeEnum.TopAbs_FACE,e.TopAbs_ShapeEnum.TopAbs_SHAPE);o.More();o.Next()){const t=o.Current(),n=e.TopoDS.Face_1(t);let s;try{s=new e.BRepMesh_IncrementalMesh_2(n,.1,!1,.5,!1)}catch(e){console.error("face visualizi<ng failed");continue}const a=new e.TopLoc_Location_1,i=e.BRep_Tool.Triangulation(n,a,0);if(i.IsNull())continue;const c=new e.Poly_Connect_2(i),p=i.get(),l=new Float32Array(3*p.NbNodes());for(let e=1;e<=p.NbNodes();e++){const t=a.Transformation(),r=p.Node(e),o=r.Transformed(t);l[3*(e-1)]=o.X(),l[3*(e-1)+1]=o.Y(),l[3*(e-1)+2]=o.Z(),r.delete(),t.delete(),o.delete()}const u=new e.TColgp_Array1OfDir_2(1,p.NbNodes());e.StdPrs_ToolTriangulatedShape.Normal(n,c,u);const d=new Float32Array(3*u.Length());for(let e=u.Lower();e<=u.Upper();e++){const t=a.Transformation(),r=u.Value(e),o=r.Transformed(t);d[3*(e-1)]=o.X(),d[3*(e-1)+1]=o.Y(),d[3*(e-1)+2]=o.Z(),t.delete(),r.delete(),o.delete()}u.delete();const g=n.Orientation_1(),f=i.get().Triangles();let h,m=3*f.Length();h=m>65535?new Uint32Array(m):new Uint16Array(m);for(let t=1;t<=i.get().NbTriangles();t++){const r=f.Value(t);let o=r.Value(1),n=r.Value(2),s=r.Value(3);if(g!==e.TopAbs_Orientation.TopAbs_FORWARD){let e=o;o=n,n=e}h[3*(t-1)]=o-1,h[3*(t-1)+1]=n-1,h[3*(t-1)+2]=s-1,r.delete()}f.delete(),r.push({vertices:l,normals:d,indices:h}),c.delete(),a.delete(),i.delete(),s.delete(),n.delete(),t.delete()}return o.delete(),r};let a,i,c=0;const p=function(e){const{data:t}=e;switch(t.action){case"init shape":{const{code:e,name:r}=t.payload,o=n(a,e);if(o.errorMessage)return void i.postMessage({id:++c,action:"init geometries error",payload:{name:r,errorMessage:o.errorMessage}});if(!o.shape)return;const p=s(a,o.shape);return void i.postMessage({id:++c,action:"init geometries",payload:{name:r,geometries:p}})}case"update shape":{const{code:e,name:r}=t.payload,o=n(a,e);if(o.errorMessage)return void i.postMessage({id:++c,action:"update geometries error",payload:{name:r,errorMessage:o.errorMessage}});if(!o.shape)return;const p=s(a,o.shape);return void i.postMessage({id:++c,action:"update geometries",payload:{name:r,geometries:p}})}}};self.onmessage=function(e){i=e.ports[0],(0,o.A)().then((e=>{a=e,i.postMessage({id:++c,action:"init done"}),i.onmessage=p}))}}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var s=o[e]={exports:{}};return r[e](s,s.exports,n),s.exports}n.m=r,n.x=()=>{var e=n.O(void 0,[4690],(()=>n(8190)));return n.O(e)},e=[],n.O=(t,r,o,s)=>{if(!r){var a=1/0;for(l=0;l<e.length;l++){for(var[r,o,s]=e[l],i=!0,c=0;c<r.length;c++)(!1&s||a>=s)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(i=!1,s<a&&(a=s));if(i){e.splice(l--,1);var p=o();void 0!==p&&(t=p)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[r,o,s]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".bundle.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={8190:1};n.f.i=(t,r)=>{e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunkopencascade_js_examples=self.webpackChunkopencascade_js_examples||[],r=t.push.bind(t);t.push=t=>{var[o,s,a]=t;for(var i in s)n.o(s,i)&&(n.m[i]=s[i]);for(a&&a(n);o.length;)e[o.pop()]=1;r(t)}})(),t=n.x,n.x=()=>n.e(4690).then(t),n.x()})();