(()=>{"use strict";var e,t,r={4853:(e,t,r)=>{var o=r(4690);const n=(e,t)=>{try{return new Function(`${t}\nreturn main;`)()(e)}catch(e){return null}},a=(e,t)=>{const r=[],o=new e.TopExp_Explorer_1;for(o.Init(t,e.TopAbs_ShapeEnum.TopAbs_FACE,e.TopAbs_ShapeEnum.TopAbs_SHAPE);o.More();o.Next()){const t=o.Current(),n=e.TopoDS.Face_1(t);let a;try{a=new e.BRepMesh_IncrementalMesh_2(n,.1,!1,.5,!1)}catch(e){console.error("face visualizi<ng failed");continue}const s=new e.TopLoc_Location_1,i=e.BRep_Tool.Triangulation(n,s,0);if(i.IsNull())continue;const c=new e.Poly_Connect_2(i),l=i.get(),p=new Float32Array(3*l.NbNodes());for(let e=1;e<=l.NbNodes();e++){const t=s.Transformation(),r=l.Node(e),o=r.Transformed(t);p[3*(e-1)]=o.X(),p[3*(e-1)+1]=o.Y(),p[3*(e-1)+2]=o.Z(),r.delete(),t.delete(),o.delete()}const u=new e.TColgp_Array1OfDir_2(1,l.NbNodes());e.StdPrs_ToolTriangulatedShape.Normal(n,c,u);const d=new Float32Array(3*u.Length());for(let e=u.Lower();e<=u.Upper();e++){const t=s.Transformation(),r=u.Value(e),o=r.Transformed(t);d[3*(e-1)]=o.X(),d[3*(e-1)+1]=o.Y(),d[3*(e-1)+2]=o.Z(),t.delete(),r.delete(),o.delete()}u.delete();const f=n.Orientation_1(),g=i.get().Triangles();let h,m=3*g.Length();h=m>65535?new Uint32Array(m):new Uint16Array(m);for(let t=1;t<=i.get().NbTriangles();t++){const r=g.Value(t);let o=r.Value(1),n=r.Value(2),a=r.Value(3);if(f!==e.TopAbs_Orientation.TopAbs_FORWARD){let e=o;o=n,n=e}h[3*(t-1)]=o-1,h[3*(t-1)+1]=n-1,h[3*(t-1)+2]=a-1,r.delete()}g.delete(),r.push({vertices:p,normals:d,indices:h}),c.delete(),s.delete(),i.delete(),a.delete(),n.delete(),t.delete()}return o.delete(),r};let s,i,c=0;const l=function(e){const{data:t}=e;switch(t.action){case"init shape":{const{code:e,name:r}=t.payload,o=n(s,e);if(!o)return;const l=a(s,o);i.postMessage({id:++c,action:"init geometries",payload:{name:r,geometries:l}});break}case"update shape":{const{code:e,name:r}=t.payload,o=n(s,e);if(!o)return;const l=a(s,o);i.postMessage({id:++c,action:"update geometries",payload:{name:r,geometries:l}});break}}};self.onmessage=function(e){i=e.ports[0],(0,o.A)().then((e=>{s=e,i.postMessage({id:++c,action:"init done"}),i.onmessage=l}))}}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={exports:{}};return r[e](a,a.exports,n),a.exports}n.m=r,n.x=()=>{var e=n.O(void 0,[4690],(()=>n(4853)));return n.O(e)},e=[],n.O=(t,r,o,a)=>{if(!r){var s=1/0;for(p=0;p<e.length;p++){for(var[r,o,a]=e[p],i=!0,c=0;c<r.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(i=!1,a<s&&(s=a));if(i){e.splice(p--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[r,o,a]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".bundle.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={4853:1};n.f.i=(t,r)=>{e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunkopencascade_js_examples=self.webpackChunkopencascade_js_examples||[],r=t.push.bind(t);t.push=t=>{var[o,a,s]=t;for(var i in a)n.o(a,i)&&(n.m[i]=a[i]);for(s&&s(n);o.length;)e[o.pop()]=1;r(t)}})(),t=n.x,n.x=()=>n.e(4690).then(t),n.x()})();